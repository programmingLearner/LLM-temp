from transformers import T5Config, T5Tokenizer, T5ForConditionalGeneration

# Load the pre-trained model configuration
model_name = "t5-small"
config = T5Config.from_pretrained(model_name)

# Update the configuration to output hidden states
config.output_hidden_states = True

# Load the pre-trained model with the updated configuration
model = T5ForConditionalGeneration.from_pretrained(model_name, config=config)
tokenizer = T5Tokenizer.from_pretrained(model_name)

# Now when you perform a forward pass with the model, it will output all hidden states.
